<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fitness Tracker PWA</title>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Styles -->
  <link rel="stylesheet" href="styles.css">

  <link rel="manifest" href="manifest.json">

  <style>
    /* Simple page switching */
    .page { display: none; transition: opacity 0.3s ease; }
    .page.active { display: block; opacity: 1; }

    /* Navigation buttons */
    #navBar { margin: 10px 0; }
    #navBar button { margin-right: 5px; padding: 5px 10px; }

    /* Modal styles */
    .modal { display: none; position: fixed; top:0; left:0; width:100%; height:100%;
             background: rgba(0,0,0,0.6); justify-content:center; align-items:center; }
    .modal.active { display:flex; }
    .modal-content { background:white; padding:20px; border-radius:10px; width:90%; max-width:400px; }
    .modal-content input, .modal-content textarea { width:100%; margin:5px 0; }
  </style>
</head>
<body>

  <!-- HEADER -->
  <header>
    <h1>ğŸ‹ï¸ Fitness Tracker</h1>
    <button id="themeToggle">ğŸŒ™</button>
    <button id="lockBtn">ğŸ”</button>
    <button id="resetBtn">ğŸ—‘ï¸</button>
  </header>

  <!-- PIN LOCK OVERLAY -->
  <div id="pinOverlay">
    <div class="pinBox">
      <h2>ğŸ”’ Enter PIN</h2>
      <input type="password" id="pinInput" maxlength="4" inputmode="numeric" placeholder="â€¢â€¢â€¢â€¢"/>
      <button id="pinBtn">Set PIN</button>
      <p id="pinMsg"></p>
    </div>
  </div>

  <!-- NAVIGATION -->
  <div id="navBar">
    <button id="page1Btn">âœ Progress</button>
    <button id="page2Btn">ğŸ“‹ Records</button>
  </div>

  <!-- PAGE 1: Progress Form + Chart -->
  <div id="page1" class="page active">
    <form id="progressForm">
      <input type="date" id="date" required>
      <input type="number" step="0.1" id="weight" placeholder="Weight (kg)" required>
      <input type="number" step="0.1" id="fat" placeholder="Body Fat (%)">
      <input type="number" step="0.1" id="water" placeholder="Water (%)">
      <input type="number" step="0.01" id="height" placeholder="Height (m)">
      <textarea id="notes" placeholder="Notes..."></textarea>
      <button type="submit">ğŸ’¾ Save Progress</button>
    </form>

    <div id="bmiBox"></div>

    <section id="chartSection">
      <canvas id="weightChart"></canvas>
    </section>
  </div>

  <!-- PAGE 2: Records List -->
  <div id="page2" class="page">
    <ul id="recordList"></ul>
  </div>

  <!-- MODAL FOR EDITING RECORD -->
  <div id="editModal" class="modal">
    <div class="modal-content">
      <h3>Edit Record</h3>
      <input type="date" id="editDate">
      <input type="number" step="0.1" id="editWeight" placeholder="Weight (kg)">
      <input type="number" step="0.1" id="editFat" placeholder="Body Fat (%)">
      <input type="number" step="0.1" id="editWater" placeholder="Water (%)">
      <textarea id="editNotes" placeholder="Notes..."></textarea>
      <button id="saveEditBtn">Save</button>
      <button id="closeModalBtn">Cancel</button>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/sql-wasm.js"></script>
  <script src="db.js"></script>
  <script src="app.js"></script>

</body>
</html>
